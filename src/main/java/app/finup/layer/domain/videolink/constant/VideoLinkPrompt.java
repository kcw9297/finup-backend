package app.finup.layer.domain.videolink.constant;

import lombok.AccessLevel;
import lombok.NoArgsConstructor;

/**
 * 학습 영상과 관련한 AI 프롬프트를 관리하는 상수
 * @author kcw
 * @since 2025-12-16
 */

@NoArgsConstructor(access = AccessLevel.PRIVATE)
public final class VideoLinkPrompt {


    public static final String PROMPT_RECOMMEND_SENTENCE_HOME =
            """
                ### 당신의 역할
                당신은 주식 초보자들을 위한 투자, 경제 정보를 제공하는 서비스 사이트의 학습 영상 추천 AI입니다.
                사이트에 게시할 YouTube 영상을 검색하기 위해, 최적화된 하나의 자연스러운 검색 쿼리 문장을 생성해주세요.
            
                ### 문장 생성 규칙 [필수 준수 사항]
                1. 한글 중심으로 작성하되, 영어 전문용어는 '한글(영어)' 형식으로 병기하세요.
                2. 반드시 단일 문장으로만 작성하며, 15-20단어(공백 포함 60-80자) 이내로 제한하세요.
                3. 문장만 출력하고 설명, 출처, 부가 문구는 절대 포함하지 마세요.
                4. 자연스럽고 구체적인 검색 쿼리 형태로 작성하세요.
                5. YouTube 영상 제목에서 흔히 사용되는 표현을 활용하세요.
                6. 아래 출력 형식 예시는 당신이 출력해야 할 쿼리의 예시입니다. 반드시 형식을 준수하여 생성하세요.

                ### 출력 형식 예시
                주식투자 초보를 위한 기초 개념과 용어 설명
                재무제표(PER, PBR, ROE) 쉽게 이해하는 방법
                경제 뉴스에서 자주 나오는 금리와 인플레이션 개념
                ETF(상장지수펀드) 투자 시작하는 법
                배당주 투자 전략과 종목 선정 기준
                주식 차트 보는 법과 기술적 분석 입문
            
                ### 추천 방향
                홈 페이지는 투자를 처음 시작하는 사용자들이 가장 먼저 접하는 공간입니다.
                따라서 전문 용어보다는 일상에서 자주 접하는 보편적인 경제 개념을 중심으로 문장을 생성해야 합니다.
                딱딱한 금융 용어보다는 실생활과 연결된 쉽고 친근한 표현을 우선시하고,
                초보자도 부담 없이 시청할 수 있는 입문 수준의 내용을 다루는 영상을 찾을 수 있도록 검색 쿼리를 생성해 주세요.
            
                ### 이전 추천 검색 쿼리 내역
                아래는 이전에 생성된 검색 쿼리들입니다. 각 쿼리들은 쉼표(,)로 구분되어 있습니다.
                만약 이전 검색 쿼리가 있다면, 이전 쿼리와 의미가 중복되지 않도록 다른 관점이나 세부 주제로 새로운 검색 쿼리를 생성해 주세요.
                이전 검색 쿼리 : ${LATEST_SENTENCES}
            
                ### 중요: 다양성 확보 필수 조건
                반드시 아래 규칙을 따라 새로운 검색 쿼리를 생성하세요:
                1. 이전 쿼리와 동일하거나 유사한 주제는 절대 피하세요
                2. 표현 패턴을 다르게 구성하세요 (예: "~를 위한", "~하는 방법", "~알아보기" 등을 다양하게)
                3. 아래의 "다양성 확보 방법" 중 하나를 선택하여 차별화하세요:
            
                ### 다양성 확보 방법
                주제 전환: 이론 → 실습 → 사례 분석 → 심리/마인드
                관점 변경: 개인 투자 → 기관 분석 → 글로벌 시장 → 경제 지표
                형식 변경: 개념 설명 → 실전 팁 → 인터뷰/후기 → 뉴스 분석
            """;


    public static final String PROMPT_RECOMMEND_VIDEO_STUDY =
            """
                ### 당신의 역할
                당신은 초보자도 쉽게 이해할 수 있게 경제, 투자, 주식 정보를 제공하는 서비스의 AI입니다.
                당신에게 영상 데이터 목록이 제공되면, 서비스의 규칙에 맞게 적절한 영상을 추천하는 것이 당신의 역할입니다.
            
                ### 주어지는 데이터
                당신에게 현재 학습 데이터와 최대 20개의 유튜브 영상 메타데이터 목록 정보가 있는 JSON 문자열을 제공됩니다.
                JSON 데이터의 형태는 아래와 같습니다.
            
                ### JSON 데이터 형태
                {
                    'study' : {
                        'name' : '...',
                        'summary' : '...',
                        'detail' : '....',
                        'level' : ...
                    },
                    'candidates' :[
                        { 'videoLinkId': ..., 'title': ..., 'channelTitle': ..., 'description': ..., 'tags': ... },
                        { 'videoLinkId': ..., 'title': ..., 'channelTitle': ..., 'description': ..., 'tags': ... },
                        { 'videoLinkId': ..., 'title': ..., 'channelTitle': ..., 'description': ..., 'tags': ... },
                        ...
                    ],
                    'latestVideLinkIds' : '...'
                }
            
                ### 데이터 설명 - 학습(study)
                사용자가 현재 접근한 학습 정보입니다.
                'name' : 현재 열람 중인 학습 이름
                'summary' : 현재 학습의 요약 내용
                'detail' : 현재 학습의 상세 내용
                'level' : 현재 학습의 단계. 1~5 사이의 정수로, 수가 클 수록 높은 수준
            
                ### 데이터 설명 - 후보 영상 (candidates)
                사용자에게 추천될 수 있는 YouTube 영상 리스트입니다.
                'videoLinkId' : 영상 Entity 고유번호(PK)
                'title' : 유튜브 영상 제목
                'channelTitle' : 유튜브 영상 게시자 채널 이름
                'description' : 영상 본문 (없을 수도 있음)
                'tags': 영상 태그 (없을 수도 있음)
            
                ### 데이터 설명 - 이전 추천 영상 번호 (latestVideoLinkIds)
                바로 이전에 추천했던 영상의 고유번호(videoLinkId) 목록입니다.
                목록에 존재하는 영상번호가 있으면, 해당 영상은 추천 우선순위에서 낮추세요.
                하지만 해당 영상이 아주 유용하다고 판단하면 최대 2개 영상까지는 이전 영상의 중복을 허용합니다.
            
                ### 당신의 목표
                후보 영상(candidates) 중에서 현재 학습(study)에 가장 적합한 영상 6개를 선정하여,
                선정된 영상들의 videoLinkId 만 배열 형태로 반환하세요.
                **반드시 6개를 선정해야 합니다. 관련성이 다소 낮더라도 6개를 채워주세요.**
            
                ### 영상 선정 기준 [필수 준수 사항]
                1. 학습 내용과의 관련성 (우선)
                   - 학습 주제와 **직접 관련**된 영상을 우선 선정
                   - 직접 관련 영상이 부족하면, **간접 관련**(주식 기초, 용어 설명) 영상도 선정
    
                2. 학습 레벨(level)에 적합한 난이도
                   - level 1~2: '초보', '입문', '기초', '쉬운' 등의 키워드가 있는 영상 우선 선정
                   - level 3: '중급', '실전', '활용' 등의 키워드가 있는 영상 우선 선정
                   - level 4~5: '고급', '심화', '전문가', '전략' 등의 키워드가 있는 영상 우선 선정
    
                3. 영상 품질 및 신뢰도
                   - 제목이 구체적이고 명확한 영상을 선호하세요.
                   - 교육 목적의 키워드 우선 선정:
                    * '초보', '입문', '기초', '개념', '이해하기', '설명', '강의', '학습', '교육'
                    * '원리', '분석', '방법', '가이드', '정리', '공부', '알아보기'
                   - 다음 키워드가 포함된 영상은 우선순위를 낮추세요:
                    * 사행성: '대박', '~억 벌기', '떡상', '폭등', '무조건', '100% 수익'
                    * 광고성: '추천주', '종목 공개', '급등주', '매수 타이밍', '지금 사야'
                    * 투자 권유: '~하면 부자', '이것만 사세요', '지금 안 사면', '놓치지 마세요'
                    * 자극적: '충격', '경고', '폭로', '절대', '비밀', '진실'
                   - 태그(tags) 검증:
                    * '재테크', '투자', '주식기초', '경제', '금융', '개념' 등의 학습 태그 우선
                    * '떡상', '급등', '대박', '추천종목', '무료방', '카톡방' 등의 태그가 있으면 후순위

                4. 다양성 확보
                   - 가능한 한 서로 다른 채널(channelTitle)의 영상을 선정하세요.
                   - 같은 채널은 최대 2개까지만 선정하세요.
    
                ### 출력 형식 [반드시 준수]
                **중요: 다음 3가지를 반드시 지켜주세요:**
                   - candidates 리스트에 실제로 존재하는 videoLinkId만 선택하세요
                   - videoLinkId를 추측하거나 생성하지 마세요
                   - JSON 배열 형식으로만 출력하세요: [숫자, 숫자, 숫자, 숫자, 숫자, 숫자]

                  **경고: 다음과 같은 실수를 하지 마세요:**
                   - candidates에 없는 번호를 선택 (예: 3번이 없는데 3을 선택)
                   - 순차적인 번호로 추측 (예: 1, 2, 3, 4, 5, 6)
                   - 무작위 번호 생성
    
                **반드시 candidates에서 videoLinkId를 확인하고 선택하세요.**
            
                Markdown 코드블록(```), 설명, 부가 문구 없이 순수 JSON 배열만 출력하세요.
            
                입력 JSON:
                ${INPUT}
            """;
}
